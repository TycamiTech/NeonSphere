<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neon Sphere</title>
    <style>
        /* CSS: Mengatur tampilan halaman */
        body {
            margin: 0;
            overflow: hidden; /* Hilangkan scrollbar */
            background-color: #050505; /* Hitam pekat */
            font-family: 'Segoe UI', sans-serif;
        }

        #canvas-container {
            width: 100vw;
            height: 100vh;
            display: block;
        }

        #loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 1.2rem;
            pointer-events: none;
            transition: opacity 0.5s;
        }

        /* Instruksi kecil di bawah */
        .instruction {
            position: absolute;
            bottom: 20px;
            width: 100%;
            text-align: center;
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.9rem;
            pointer-events: none;
            letter-spacing: 1px;
        }
    </style>
</head>
<body>

    <div id="loading">Memuat Visualisasi...</div>
    <div class="instruction">Geser Untuk Memutar<br>Â© Project By Tycami Tech. All rights reserved.</div>

    <div id="canvas-container"></div>

    <script type="module">
        import * as THREE from 'https://cdn.skypack.dev/three@0.136.0';
        import { OrbitControls } from 'https://cdn.skypack.dev/three@0.136.0/examples/jsm/controls/OrbitControls.js';

        // Variabel Global
        let scene, camera, renderer, controls;
        let sphereGroup;
        let rings = [];
        const loadingText = document.getElementById('loading');

        // Konfigurasi
        const config = {
            count: 64,           // Jumlah lingkaran (semakin banyak semakin padat)
            radius: 10,          // Ukuran bola
            lineThickness: 2,    // Ketebalan garis
            rotateSpeed: 0.005,  // Kecepatan rotasi otomatis
            colorSpeed: 0.02,    // Kecepatan perubahan warna
        };

        init();
        animate();

        function init() {
            // 1. Scene & Camera
            scene = new THREE.Scene();
            // Menambahkan kabut tipis agar terlihat lebih dalam
            scene.fog = new THREE.FogExp2(0x050505, 0.02);

            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 25; // Jarak kamera
            camera.position.y = 5;

            // 2. Renderer (Penyaji Gambar)
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio); // Agar tajam di layar HP
            document.getElementById('canvas-container').appendChild(renderer.domElement);

            // 3. Orbit Controls (Agar bisa diputar user)
            controls = new OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true; // Gerakan halus
            controls.dampingFactor = 0.05;

            // 4. Membuat Bola Cincin
            createNeonSphere();

            // Event saat layar diubah ukurannya
            window.addEventListener('resize', onWindowResize);

            // Hilangkan teks loading
            loadingText.style.opacity = 0;
        }

        function createNeonSphere() {
            sphereGroup = new THREE.Group();
            scene.add(sphereGroup);

            // Material Garis dengan efek 'Additive Blending' (Rahasia efek Glow tanpa plugin berat)
            // AdditiveBlending membuat warna bertumpuk menjadi lebih terang (seperti cahaya)
            const materialBase = new THREE.LineBasicMaterial({
                color: 0xffffff,
                transparent: true,
                opacity: 0.6,
                blending: THREE.AdditiveBlending 
            });

            for (let i = 0; i < config.count; i++) {
                // Hitung posisi Y dari bawah ke atas (-radius ke +radius)
                // Kita gunakan Math.acos untuk distribusi yang lebih bulat sempurna
                const phi = Math.acos( -1 + ( 2 * i ) / config.count );
                const ringRadius = config.radius * Math.sin( phi );
                const yPos = config.radius * Math.cos( phi );

                // Buat Geometri Lingkaran
                // EllipseCurve(aX, aY, xRadius, yRadius, ...)
                const curve = new THREE.EllipseCurve(
                    0, 0,            
                    ringRadius, ringRadius, 
                    0, 2 * Math.PI,  
                    false, 0
                );

                const points = curve.getPoints(128); // 128 titik agar lingkaran halus
                const geometry = new THREE.BufferGeometry().setFromPoints(points);

                // Clone material agar setiap cincin bisa punya warna beda (opsional)
                // Di sini kita pakai 1 material tapi ubah warna di animate
                const ring = new THREE.Line(geometry, materialBase.clone());

                // Rotasi lingkaran agar mendatar (defaultnya berdiri)
                ring.rotation.x = Math.PI / 2; 
                ring.position.y = yPos;

                // Simpan data unik untuk animasi
                ring.userData = {
                    id: i,
                    originalY: yPos,
                    phase: i * 0.1 // Untuk variasi gerakan/warna
                };

                sphereGroup.add(ring);
                rings.push(ring);
            }
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function animate() {
            requestAnimationFrame(animate);

            const time = Date.now() * 0.001; // Waktu dalam detik

            // Rotasi Seluruh Bola
            sphereGroup.rotation.y += config.rotateSpeed;
            sphereGroup.rotation.z = Math.sin(time * 0.2) * 0.1; // Sedikit miring kiri-kanan

            // Animasi per Cincin
            rings.forEach((ring, index) => {
                // 1. Logika Warna Pelangi Berjalan (Rainbow Flow)
                // Hue (Warna) berubah berdasarkan waktu dan posisi index cincin
                const hue = (time * config.colorSpeed * 5 + ring.userData.phase * 0.2) % 1;
                
                // Set warna HSL (Hue, Saturation, Lightness)
                // Saturation 100%, Lightness 50%
                ring.material.color.setHSL(hue, 1.0, 0.5);

                // 2. Efek Bernapas (Scale & Opacity)
                // Menggunakan Sinus wave
                const breath = Math.sin(time * 2 + ring.userData.phase);
                
                // Sedikit membesar mengecil
                const scale = 1 + breath * 0.02; 
                ring.scale.set(scale, scale, 1);

                // Opacity berubah (Menyala Meredup)
                // Kita batasi antara 0.2 sampai 0.8
                ring.material.opacity = 0.5 + (breath * 0.3);
            });

            controls.update();
            renderer.render(scene, camera);
        }
    </script>
</body>

</html>
